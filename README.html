<html>
<head>
<title>Guide to The Sources</title>
</head>
<style>
body {
    margin: 2em auto;
    max-width: 40em
}
</style>
<body>

<div id="components">
<h1>Components</h1>
<dl>
<dt><a href="./MprisD">MprisD</a></dt>
<dd>The GNU/Linux Server</dd>
<dt><a href="./Amp.Ris">Amp.Ris</a></dt>
<dd>The Android Client</dd>
<dt><a href="./Common">Common</a></dt>
<dd>The Components They Use To Interact</dd>
<dt><a href="./patches">Patches</a></dt>
<dd>Patches required for dbus-java to function correctly</dd>
<dt><a href="./doc/index.html">Javadoc</a></dt>
<dd>Javadoc documentation for the project</dd>
</dl>
</div>

<div id="marking">
<h1>Marking</h1>
<p>Apart from minor tweaks to some generated files elsewhere, the below directories contain all of my work. There are quite a few image resources bundled in the compiled and packaged APK, these were obtained from <a href="https://developer.android.com/design/downloads/index.html">Android Developer Downloads</a>.</p> 

<ul>
<li><a href="./Common/src/little/nj">Common Source Code</a></li>
<li><a href="./MprisD/src/little/nj">MprisD Source Code</a></li>
<li><a href="./Amp.Ris/src/little/nj/mprisdroid">Amp.Ris Source Code</a></li>
<li><a href="./Amp.Ris/res/layout">Amp.Ris Default Layouts</a></li>
<li><a href="./Amp.Ris/res/layout-land">Amp.Ris Landscape Layouts</a></li>
</div>

<div id="building">
<h1>Building</h1>
<p>I didn't spend much time on a complicated build system. The ant build present is based on that generated by IntelliJ with a few minor tweaks to get the nested Android project to build using it's own configuration.</p>

<p>In a nutshell, typing <code>ant clean</code> or <code>ant build</code> should do what you'd expect from them. After which all output will be in the <a href="./out/production">project output directory</a>. For this to work, Jar files of <a href="https://code.google.com/p/google-gson/">google-gson</a>, <a href="http://code.google.com/p/avahi4j/">avahi4j</a>, <a href="http://dbus.freedesktop.org/releases/dbus-java/">dbus-java</a> and <a href="http://jmdns.sourceforge.net/index.html">jmdns</a> must be present in the appropriate directories. If your system is 64 bit, then you should be able to use the ones I've prepared, otherwise you'll need to build or obtain versions to link against. Of course, an Android SDK with API 16 installed must be present for building Amp.Ris, <a href="./Amp.Ris/local.properties">see the local.properties file to configure this</a>.</p>

<p>I had trouble with the latest stable version of JmDNS, version 3.4.1. Therefore building against <a href="https://jmdns.svn.sourceforge.net/svnroot/jmdns/trunk">trunk</a> is recommended.</p>

<p>If rolling your own <a href="http://dbus.freedesktop.org/releases/dbus-java/">dbus-java</a> then take note of the <a href="./patches">patches</a> directory. They are required for property extraction in the server. Both should apply cleanly to dbus-java 2.7.</p>
</div>

<div id="running">
<h1>Running the Server</h1>
<p>At runtime, you will require <a href="http://www.matthew.ath.cx/projects/java/">libmatthew-java</a>. All other requirements, dbus-java, gson and avahi4j are included as built upon a 64 bit system with Oracle JDK 1.7. Starting the server involves a command such as this:</p>
<pre>
$ PROJECT_DIR=.
$ LIBMATTHEW=/usr/lib64/libmatthew-java
$ java \
-Djava.library.path="$PROJECT_DIR/MprisD/libs:$LIBMATTHEW" \
-classpath "$PROJECT_DIR/out/production/MprisD:$PROJECT_DIR/out/production/Common:$PROJECT_DIR/MprisD/libs/*:$PROJECT_DIR/libs/*" \
little.nj.Main
</pre>

<p>Alternatively, modify and execute <em>daemon.sh</em>.</p>
</div>

</body>
</html
